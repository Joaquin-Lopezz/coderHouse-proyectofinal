<!doctype html>
<html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="viewport" content="width=device-width, initial-scale=1"/><title>Mochawesome Report</title><link rel="stylesheet" href="assets\app.css"/></head><body data-raw="{&quot;stats&quot;:{&quot;suites&quot;:12,&quot;tests&quot;:10,&quot;passes&quot;:10,&quot;pending&quot;:0,&quot;failures&quot;:0,&quot;start&quot;:&quot;2024-08-06T16:47:09.591Z&quot;,&quot;end&quot;:&quot;2024-08-06T16:47:28.694Z&quot;,&quot;duration&quot;:19103,&quot;testsRegistered&quot;:10,&quot;passPercent&quot;:100,&quot;pendingPercent&quot;:0,&quot;other&quot;:0,&quot;hasOther&quot;:false,&quot;skipped&quot;:0,&quot;hasSkipped&quot;:false},&quot;results&quot;:[{&quot;uuid&quot;:&quot;7baa1fa2-e3b8-4b33-a0b3-481a3aaa6910&quot;,&quot;title&quot;:&quot;&quot;,&quot;fullFile&quot;:&quot;&quot;,&quot;file&quot;:&quot;&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;{root}\&quot;&quot;,&quot;fullTitle&quot;:&quot;\&quot;before all\&quot; hook in \&quot;{root}\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1836,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// Conectar a la base de datos\nawait mongoose.connect(MONGODB_CNX_STR);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;59d69f48-42b8-4615-a612-a48b5b0bf0a4&quot;,&quot;parentUUID&quot;:&quot;7baa1fa2-e3b8-4b33-a0b3-481a3aaa6910&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook in \&quot;{root}\&quot;&quot;,&quot;fullTitle&quot;:&quot;\&quot;after all\&quot; hook in \&quot;{root}\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// Desconectar de la base de datos\nawait mongoose.disconnect();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e1a19e48-ea3c-4ff4-8bec-05fe4406a1cb&quot;,&quot;parentUUID&quot;:&quot;7baa1fa2-e3b8-4b33-a0b3-481a3aaa6910&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;after each\&quot; hook in \&quot;{root}\&quot;&quot;,&quot;fullTitle&quot;:&quot;\&quot;after each\&quot; hook in \&quot;{root}\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:906,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;this.timeout(10000);\n// Limpiar colecciones después de cada prueba\nconst collections = await mongoose.connection.db\n    .listCollections()\n    .toArray();\nawait mongoose.connection.db.collection(&#x27;productos&#x27;).deleteMany({});\nawait mongoose.connection.db.collection(&#x27;carritos&#x27;).deleteMany({});\nawait mongoose.connection.db.collection(&#x27;sessions&#x27;).deleteMany({});\nawait mongoose.connection.db.collection(&#x27;usuarios&#x27;).deleteMany({});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c9f2833e-13f7-497e-9dd1-6b7b55e0d784&quot;,&quot;parentUUID&quot;:&quot;7baa1fa2-e3b8-4b33-a0b3-481a3aaa6910&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;bc76521c-14c0-43c7-b608-13f9adaa2783&quot;,&quot;title&quot;:&quot;Testing productos:&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\Tap\\Desktop\\proyecto final\\test\\super.test.js&quot;,&quot;file&quot;:&quot;\\test\\super.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;b5b214e5-9811-4b72-9517-6eda77d85765&quot;,&quot;title&quot;:&quot;Agregar un producto:&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\Tap\\Desktop\\proyecto final\\test\\super.test.js&quot;,&quot;file&quot;:&quot;\\test\\super.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;debería agregar un producto correctamente&quot;,&quot;fullTitle&quot;:&quot;Testing productos: Agregar un producto: debería agregar un producto correctamente&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:472,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const producto = {\n    title: &#x27;Casa&#x27;,\n    description: &#x27;Descripción de la casa&#x27;,\n    price: 4241,\n    thumbnail: &#x27;url-de-imagen&#x27;,\n    code: `unique-code-${Date.now()}`,\n    stock: 10,\n    category: &#x27;Inmuebles&#x27;,\n    status: true,\n    owner: &#x27;user@example.com&#x27;,\n};\nconst { statusCode, body } = await requester.post(&#x27;/api/productos&#x27;).send(producto);\nexpect(statusCode).to.equal(200);\nexpect(body).to.have.property(&#x27;_id&#x27;);\nexpect(body).to.have.property(&#x27;title&#x27;, &#x27;Casa&#x27;);\n// Validaciones adicionales de los campos&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2e9b8f0e-a38d-4dd9-b560-cde5e9ed63bd&quot;,&quot;parentUUID&quot;:&quot;b5b214e5-9811-4b72-9517-6eda77d85765&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;2e9b8f0e-a38d-4dd9-b560-cde5e9ed63bd&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:472,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;ee3bb055-0b27-4c62-aa84-4178a90d1775&quot;,&quot;title&quot;:&quot;Obtener productos:&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\Tap\\Desktop\\proyecto final\\test\\super.test.js&quot;,&quot;file&quot;:&quot;\\test\\super.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;debería obtener una lista de productos&quot;,&quot;fullTitle&quot;:&quot;Testing productos: Obtener productos: debería obtener una lista de productos&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:186,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const { statusCode, body } = await requester.get(&#x27;/api/productos&#x27;);\nexpect(statusCode).to.equal(200);\nexpect(body).to.be.an(&#x27;array&#x27;);\nbody.forEach(producto =&gt; {\n    expect(producto).to.have.property(&#x27;_id&#x27;);\n    expect(producto).to.have.property(&#x27;title&#x27;);\n    // Validaciones adicionales de los campos\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ef0892d7-f7bd-4ec7-88a6-74b3c25e5a63&quot;,&quot;parentUUID&quot;:&quot;ee3bb055-0b27-4c62-aa84-4178a90d1775&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;ef0892d7-f7bd-4ec7-88a6-74b3c25e5a63&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:186,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;d8916306-10d3-44c0-be87-c9c3150fc657&quot;,&quot;title&quot;:&quot;Eliminar un producto:&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\Tap\\Desktop\\proyecto final\\test\\super.test.js&quot;,&quot;file&quot;:&quot;\\test\\super.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;debería eliminar un producto correctamente&quot;,&quot;fullTitle&quot;:&quot;Testing productos: Eliminar un producto: debería eliminar un producto correctamente&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:622,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const producto = {\n    title: &#x27;Auto&#x27;,\n    description: &#x27;Descripción del auto&#x27;,\n    price: 15000,\n    thumbnail: &#x27;url-de-imagen&#x27;,\n    code: `unique-code-${Date.now()}`,\n    stock: 5,\n    category: &#x27;Vehículos&#x27;,\n    status: true,\n    owner: &#x27;user@example.com&#x27;,\n};\nconst { body: productoAgregado } = await requester.post(&#x27;/api/productos&#x27;).send(producto);\nconst { _id } = productoAgregado;\nconst { statusCode, body } = await requester.delete(`/api/productos/${_id}`);\nexpect(statusCode).to.equal(200);\nexpect(body).to.have.property(&#x27;message&#x27;).that.includes(&#x27;Se eliminó el producto&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;096d8d2b-1ee8-47c8-9bc2-54d1eef4d590&quot;,&quot;parentUUID&quot;:&quot;d8916306-10d3-44c0-be87-c9c3150fc657&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;096d8d2b-1ee8-47c8-9bc2-54d1eef4d590&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:622,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;534b849f-d1db-4b0c-ae21-a2b72b165046&quot;,&quot;title&quot;:&quot;testing carritos:&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\Tap\\Desktop\\proyecto final\\test\\super.test.js&quot;,&quot;file&quot;:&quot;\\test\\super.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;14cae39e-ebad-44cb-9a34-932cbdcc675e&quot;,&quot;title&quot;:&quot;Crear un producto:&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\Tap\\Desktop\\proyecto final\\test\\super.test.js&quot;,&quot;file&quot;:&quot;\\test\\super.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;crear carrito&quot;,&quot;fullTitle&quot;:&quot;testing carritos: Crear un producto: crear carrito&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:367,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const { statusCode, ok, body } = await requester.post(\n    &#x27;/api/carrito/:userId&#x27;\n);\nexpect(statusCode).to.equal(200);\nexpect(ok).to.be.true;\nexpect(body).to.be.an(&#x27;object&#x27;); // Espera un objeto en lugar de un array\nexpect(body).to.have.property(&#x27;carrito&#x27;);\nexpect(body.carrito).to.be.an(&#x27;object&#x27;); // Asegúrate de que &#x27;carrito&#x27; sea un objeto&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9d5a04b7-2230-48b4-b487-1b894fb21a78&quot;,&quot;parentUUID&quot;:&quot;14cae39e-ebad-44cb-9a34-932cbdcc675e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;9d5a04b7-2230-48b4-b487-1b894fb21a78&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:367,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;47cd9194-1452-47c0-861e-7c6a83c03233&quot;,&quot;title&quot;:&quot;Agregar un producto al carrito:&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\Tap\\Desktop\\proyecto final\\test\\super.test.js&quot;,&quot;file&quot;:&quot;\\test\\super.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;debería agregar un producto al carrito correctamente&quot;,&quot;fullTitle&quot;:&quot;testing carritos: Agregar un producto al carrito: debería agregar un producto al carrito correctamente&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:730,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// Primero, crea un carrito para agregar productos\nconst carritoResponse = await requester.post(&#x27;/api/carrito/1234&#x27;); \n      \nconst carritoId = carritoResponse.body.carrito._id;\n    \n// Luego, agrega un producto al carrito\nconst producto = {\n    producto :{\n        _id: &#x27;ofdskafok34&#x27;,\n        title: &#x27;casa&#x27;,\n        description: &#x27;adsfads&#x27;,\n        price: 4241,\n        thumbnail: &#x27;dsa234&#x27;,\n        code: `unique-code-${Date.now()}`,\n        stock: 3241,\n        category: &#x27;dsfa&#x27;,\n        status: true,\n        owner: &#x27;joaquin.ariel.lopez.98@gmail.com&#x27;,\n    }\n}\n \nconst { statusCode, ok, body } = await requester\n    .post(`/api/carrito/addProduct/${carritoId}`)\n    .send(producto);\nexpect(statusCode).to.equal(200);\nexpect(ok).to.be.true;\nexpect(body).to.be.an(&#x27;object&#x27;);\nexpect(body).to.have.property(&#x27;carrito&#x27;);\nexpect(body.carrito).to.be.an(&#x27;object&#x27;); // O ajusta según la estructura que devuelves&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a71867d9-c5b3-4845-ba89-8302812eb64a&quot;,&quot;parentUUID&quot;:&quot;47cd9194-1452-47c0-861e-7c6a83c03233&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;a71867d9-c5b3-4845-ba89-8302812eb64a&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:730,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;187318e5-a34c-4b26-aa05-42c2b57ebe9a&quot;,&quot;title&quot;:&quot;Eliminar un producto del carrito:&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\Tap\\Desktop\\proyecto final\\test\\super.test.js&quot;,&quot;file&quot;:&quot;\\test\\super.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;debería eliminar un producto del carrito correctamente&quot;,&quot;fullTitle&quot;:&quot;testing carritos: Eliminar un producto del carrito: debería eliminar un producto del carrito correctamente&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1243,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// Primero, crea un carrito para agregar productos\nconst carritoResponse = await requester.post(&#x27;/api/carrito/1234&#x27;);\nconst carritoId = carritoResponse.body.carrito._id;\n// Luego, agrega un producto al carrito\nconst producto = {\n    producto: {\n        _id: &#x27;ofdskafok34&#x27;,\n        title: &#x27;casa&#x27;,\n        description: &#x27;adsfads&#x27;,\n        price: 4241,\n        thumbnail: &#x27;dsa234&#x27;,\n        code: `unique-code-${Date.now()}`,\n        stock: 3241,\n        category: &#x27;dsfa&#x27;,\n        status: true,\n        owner: &#x27;joaquin.ariel.lopez.98@gmail.com&#x27;,\n    }\n};\nawait requester\n    .post(`/api/carrito/addProduct/${carritoId}`)\n    .send(producto);\n// Luego, elimina el producto agregado\nconst { statusCode, ok, body } = await requester.delete(`/api/carrito/${carritoId}/ofdskafok34`);\nexpect(statusCode).to.equal(200);\nexpect(ok).to.be.true;\nexpect(body).to.be.an(&#x27;object&#x27;); // Ajusta según la estructura que devuelves\nexpect(body).to.have.property(&#x27;_id&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;499910df-4e2b-49eb-9ad5-ffd39f2718bc&quot;,&quot;parentUUID&quot;:&quot;187318e5-a34c-4b26-aa05-42c2b57ebe9a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;499910df-4e2b-49eb-9ad5-ffd39f2718bc&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1243,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;5ab99b80-f48e-4436-af45-86e656613962&quot;,&quot;title&quot;:&quot;Testing sesiones:&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\Tap\\Desktop\\proyecto final\\test\\super.test.js&quot;,&quot;file&quot;:&quot;\\test\\super.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;33712d59-be9d-4ed0-879d-a3a6b926840b&quot;,&quot;title&quot;:&quot;Iniciar sesión:&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\Tap\\Desktop\\proyecto final\\test\\super.test.js&quot;,&quot;file&quot;:&quot;\\test\\super.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;debería iniciar sesión correctamente&quot;,&quot;fullTitle&quot;:&quot;Testing sesiones: Iniciar sesión: debería iniciar sesión correctamente&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1675,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const datos = {\n    nombre: &#x27;x&#x27;,\n    apellido: &#x27;x&#x27;,\n    email: &#x27;x@x.com&#x27;,\n    password: &#x27;1234&#x27;,\n};\nawait requester.post(&#x27;/api/usuarios&#x27;).send(datos);\nconst { statusCode, text } = await requester\n    .post(&#x27;/api/sesiones&#x27;)\n    .send({ email: &#x27;x@x.com&#x27;, password: &#x27;1234&#x27; });\nconst body = JSON.parse(text);\nexpect(statusCode).to.equal(201);\nexpect(body).to.have.property(&#x27;message&#x27;, &#x27;login success&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ece8ddc5-cca8-4f7d-8ee4-cbdb59dd9227&quot;,&quot;parentUUID&quot;:&quot;33712d59-be9d-4ed0-879d-a3a6b926840b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;debería fallar con credenciales incorrectas&quot;,&quot;fullTitle&quot;:&quot;Testing sesiones: Iniciar sesión: debería fallar con credenciales incorrectas&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:8,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const credentials = {\n    username: &#x27;usuario&#x27;,\n    password: &#x27;password&#x27;,\n};\nconst { statusCode, body } = await requester\n    .post(&#x27;/api/sesiones&#x27;)\n    .send(credentials);\nexpect(statusCode).to.equal(401);\nexpect(body).to.have.property(&#x27;status&#x27;, &#x27;error&#x27;);\nexpect(body).to.have.property(&#x27;message&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8a4637b3-ef92-4ea1-b84a-bbc6c01df062&quot;,&quot;parentUUID&quot;:&quot;33712d59-be9d-4ed0-879d-a3a6b926840b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;ece8ddc5-cca8-4f7d-8ee4-cbdb59dd9227&quot;,&quot;8a4637b3-ef92-4ea1-b84a-bbc6c01df062&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1683,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;ed67b615-dc8c-4b13-bae1-c4801fefe0a9&quot;,&quot;title&quot;:&quot;Obtener sesión actual:&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\Tap\\Desktop\\proyecto final\\test\\super.test.js&quot;,&quot;file&quot;:&quot;\\test\\super.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;debería obtener la sesión actual&quot;,&quot;fullTitle&quot;:&quot;Testing sesiones: Obtener sesión actual: debería obtener la sesión actual&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2619,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const datos = {\n    nombre: &#x27;x&#x27;,\n    apellido: &#x27;x&#x27;,\n    email: &#x27;x@x.com&#x27;,\n    password: &#x27;1234&#x27;,\n};\n// Registrar el usuario\nawait requester.post(&#x27;/api/usuarios&#x27;).send(datos);\nconst loginResponse = await requester\n    .post(&#x27;/api/sesiones&#x27;)\n    .send({ email: &#x27;x@x.com&#x27;, password: &#x27;1234&#x27; });\nconst cookies = loginResponse.headers[&#x27;set-cookie&#x27;];\nconst response = await requester\n    .get(&#x27;/api/usuarios/current&#x27;)\n    .set(&#x27;Cookie&#x27;, cookies); \nconst { statusCode, body } = response;\nexpect(statusCode).to.equal(200); \nexpect(body).to.have.property(&#x27;payload&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a2407d28-28ca-427c-ac40-0726887c26f1&quot;,&quot;parentUUID&quot;:&quot;ed67b615-dc8c-4b13-bae1-c4801fefe0a9&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;a2407d28-28ca-427c-ac40-0726887c26f1&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2619,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:5000},{&quot;uuid&quot;:&quot;6b115240-ce94-4b3a-bc24-eab589a9b677&quot;,&quot;title&quot;:&quot;Cerrar sesión:&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\Tap\\Desktop\\proyecto final\\test\\super.test.js&quot;,&quot;file&quot;:&quot;\\test\\super.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;debería cerrar sesión correctamente&quot;,&quot;fullTitle&quot;:&quot;Testing sesiones: Cerrar sesión: debería cerrar sesión correctamente&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:185,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const credentials = {\n    username: &#x27;testuser&#x27;,\n    password: &#x27;testpassword&#x27;\n};\nawait requester.post(&#x27;/api/sesiones&#x27;).send(credentials);\nconst { statusCode, body } = await requester.delete(&#x27;/api/sesiones/current&#x27;);\nexpect(statusCode).to.equal(200);\nexpect(body).to.have.property(&#x27;status&#x27;, &#x27;success&#x27;);\nexpect(body).to.have.property(&#x27;message&#x27;, &#x27;logout OK&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;695d780c-8a35-4bad-9741-1aac9651b74f&quot;,&quot;parentUUID&quot;:&quot;6b115240-ce94-4b3a-bc24-eab589a9b677&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;695d780c-8a35-4bad-9741-1aac9651b74f&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:185,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:true,&quot;rootEmpty&quot;:true,&quot;_timeout&quot;:2000}],&quot;meta&quot;:{&quot;mocha&quot;:{&quot;version&quot;:&quot;10.7.0&quot;},&quot;mochawesome&quot;:{&quot;options&quot;:{&quot;quiet&quot;:false,&quot;reportFilename&quot;:&quot;index&quot;,&quot;saveHtml&quot;:true,&quot;saveJson&quot;:true,&quot;consoleReporter&quot;:&quot;spec&quot;,&quot;useInlineDiffs&quot;:false,&quot;code&quot;:true},&quot;version&quot;:&quot;7.1.3&quot;},&quot;marge&quot;:{&quot;options&quot;:{&quot;reportDir&quot;:&quot;reports&quot;,&quot;reportFilename&quot;:&quot;index&quot;},&quot;version&quot;:&quot;6.2.0&quot;}}}" data-config="{&quot;reportFilename&quot;:&quot;index&quot;,&quot;reportDir&quot;:&quot;reports&quot;,&quot;reportTitle&quot;:&quot;proyecto final&quot;,&quot;reportPageTitle&quot;:&quot;Mochawesome Report&quot;,&quot;inline&quot;:false,&quot;inlineAssets&quot;:false,&quot;cdn&quot;:false,&quot;charts&quot;:false,&quot;enableCharts&quot;:false,&quot;code&quot;:true,&quot;enableCode&quot;:true,&quot;autoOpen&quot;:false,&quot;overwrite&quot;:true,&quot;timestamp&quot;:false,&quot;ts&quot;:false,&quot;showPassed&quot;:true,&quot;showFailed&quot;:true,&quot;showPending&quot;:true,&quot;showSkipped&quot;:false,&quot;showHooks&quot;:&quot;failed&quot;,&quot;saveJson&quot;:true,&quot;saveHtml&quot;:true,&quot;dev&quot;:false,&quot;assetsDir&quot;:&quot;reports\\assets&quot;,&quot;jsonFile&quot;:&quot;C:\\Users\\Tap\\Desktop\\proyecto final\\reports\\index.json&quot;,&quot;htmlFile&quot;:&quot;C:\\Users\\Tap\\Desktop\\proyecto final\\reports\\index.html&quot;}"><div id="report"></div><script src="assets\app.js"></script></body></html>